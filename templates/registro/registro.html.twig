{% extends 'base.html.twig' %}

{% block body %}
<div>
    <div style="padding: 1rem;">
        <a href="{{ path('app_login') }}" class="btn btn-danger">Volver</a>
    </div>
    <h1 style="display: flex; justify-content: center; font-size: 50px;">Registro</h1>
</div>
<br></br>

{% for label, messages in app.flashes() %}
{% for message in messages %}
{% if label == 'exito' %}
<div class="alert alert-success">
    {{message}}
</div>
{% else %}
<div class="alert alert-danger">
    {{message}}
</div>
{% endif %}
{% endfor %}
{% endfor %}

{#TIENE QUE MOSTRAR TODOS LOS DATOS REPETIDOS#}
{% if arrayValoresString is defined %}

<div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true" style="display: block;">
      <div class="toast-header">
        <img src="{{ asset('c.svg') }}" class="rounded me-2" alt="..." style="width: 30px;">
        <strong class="me-auto">Datos Erroneos</strong>
        <small>Ahora</small>
      </div>
      <div class="toast-body">
        Los siguientes datos ya se encuentran ocupados, intente nuevamente
        <b style="color: red;">
            : {{ arrayValoresString ?? "" }}
        </b>
      </div>
    </div>
  </div>

{% endif %}

<script>
    setTimeout(function() {
        $('#liveToast').fadeOut(1000, function() {
            $(this).remove();
        });
    }, 7000);
</script>

<form style="margin: 1rem;" action="{{ path('registro_manager') }}" method="post" id="form_registro" onsubmit="return validarDatos()">
    <label for="registro_nombre">Nombre Completo</label>
    <div>
        <input type="text" name="nombre_completo" required>
    </div>

    <label for="">Nombre de Usuario</label>
    <div>
        <input type="text" name="nombre_usuario" required>
    </div>

    <label for="">Correo Electronico</label>
    <div>
        <input type="email" name="correo_electronico" required>
    </div>

    <label for="">Contraseña</label>
    <div>
        <input type="password" name="contraseña" id="contraseñaOrg" required>
        <button type="button" id="togglePassword1" class="btn btn-outline-secondary" style="border-radius: 0.5rem; font-size: small;">Mostrar</button>
    </div>

    <label for="">Repetir Contraseña</label>
    <div>
        <input type="password" name="repetir_contraseña" id="contraseña_repetida" required>
        <button type="button" id="togglePassword2" class="btn btn-outline-secondary" style="border-radius: 0.5rem; font-size: small">Mostrar</button>
    </div>

    <span id="contraseñaErronea" style="color: red;"></span>

    </br>
    <input type="submit" value="Registrarme" class="btn btn-primary">
</form>

<script>
    document.getElementById('togglePassword1').addEventListener('click', function () {
        let passwordInput = document.getElementById('contraseñaOrg');
        let currentType = passwordInput.getAttribute('type');
        passwordInput.setAttribute('type', currentType === 'password' ? 'text' : 'password');
        this.textContent = currentType === 'password' ? 'Ocultar' : 'Mostrar';
    });

    document.getElementById('togglePassword2').addEventListener('click', function () {
        let passwordInput = document.getElementById('contraseña_repetida');
        let currentType = passwordInput.getAttribute('type');
        passwordInput.setAttribute('type', currentType === 'password' ? 'text' : 'password');
        this.textContent = currentType === 'password' ? 'Ocultar' : 'Mostrar';
    });
</script>

<script>
    function validarDatos() {
        let contraseña = document.getElementById('contraseñaOrg').value;
        let contraseña_repetida = document.getElementById('contraseña_repetida').value;
        let contraseña_erronea = document.getElementById('contraseñaErronea');
        let regex = /^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[^\da-zA-Z]).{8,}$/;

        if (!regex.test(contraseña)) {
            contraseña_erronea.innerHTML = 'La contraseña debe tener al menos una mayúscula, una minúscula, un número, un carácter especial y tener al menos 8 caracteres.';
            return false;
        }

        if(contraseña === contraseña_repetida){
            contraseña_erronea.innerHTML = '';
            return true;
        }else{
            contraseña_erronea.innerHTML = 'Las contraseñas no coinciden';
            return false;
        }

    }
</script>

<footer>
    <div class="container-footer w-container">
        <div class="w-row">
            <div class="footer-column w-clearfix w-col w-col-4"><img
                    src="{{ asset('c.svg') }}"
                    alt="" width="40" class="failory-logo-image">
                <h3 class="footer-failory-name">Cineverse</h3>
                <p class="footer-description-failory">Lorem ipsum dolor sit amet.<br></p>
            </div>
            <div class="footer-column w-col w-col-8">
                <div class="w-row">
                    <div class="w-col w-col-8">
                        <div class="w-row">
                            <div class="w-col w-col-7 w-col-small-6 w-col-tiny-7">
                                <h3 class="footer-titles">Learn</h3>
                                <p class="footer-links"><a href="" target="_blank" class="aa"><span class="footer-link">Failed
                                            Startups<br></span></a><a href=""  class="aa"><span class="footer-link">Successful
                                            Startups<br></span></a><a href=""  class="aa"><span
                                            class="footer-link">Blog</span></a><span><br></span><a href=""  class="aa"><span
                                            class="footer-link">Entrepreneurial Tools<br></span></a><a href=""  class="aa"><span
                                            class="footer-link">Startup Cemetery<br></span></a><a href=""  class="aa"><span
                                            class="footer-link">Podcast</span></a class="aa"><strong><br></strong></p>
                            </div>
                            <div class="w-col w-col-5 w-col-small-6 w-col-tiny-5">
                                <h3 class="footer-titles">Other</h3>
                                <p class="footer-links"><a href="" class="aa"><span class="footer-link">Sponsor Us!<br></span></a><a
                                        href=""  class="aa"><span class="footer-link">Open Startup<br></span></a><a href=""  class="aa"><span
                                            class="footer-link"></span></a><a href="" class="aa"><span
                                            class="footer-link">Contribute<br></span></a><a href="" class="aa"><span
                                            class="footer-link">FAQ</span></a class="aa"><strong><br></strong></p>
                            </div>
                        </div>
                    </div>
                    <div class="column-center-mobile w-col w-col-4">
                        <h3 class="footer-titles">Follow Us!</h3><a href="" target="_blank"
                            class="footer-social-network-icons w-inline-block"><img
                                src="https://uploads-ssl.webflow.com/5966ea9a9217ca534caf139f/5c8dbf0a2f2b67e3b3ba079c_Twitter%20Icon.svg"
                                width="20" alt="Twitter icon"></a><a href="" target="_blank"
                            class="footer-social-network-icons w-inline-block"><img
                                src="https://uploads-ssl.webflow.com/5966ea9a9217ca534caf139f/5c8dbfe70fcf5a0514c5b1da_Instagram%20Icon.svg"
                                width="20" alt="Instagram icon"></a><a href="" target="_blank"
                            class="footer-social-network-icons w-inline-block"><img
                                src="https://uploads-ssl.webflow.com/5966ea9a9217ca534caf139f/5c8dbe42e1e6034fdaba46f6_Facebook%20Icon.svg"
                                width="20" alt="Facebook Icon"></a><a href="" target="_blank"
                            class="footer-social-network-icons w-inline-block"><img
                                src="https://uploads-ssl.webflow.com/5966ea9a9217ca534caf139f/5c8dc0002f2b676eb4ba0869_LinkedIn%20Icon.svg"
                                width="20" alt="LinkedIn Icon"></a><a href="" target="_blank"
                            class="footer-social-network-icons w-inline-block"><img
                                src="https://uploads-ssl.webflow.com/5966ea9a9217ca534caf139f/5c8dc0112f2b6739c9ba0871_Pinterest%20Icon.svg"
                                width="20" alt="Pinterest Icon" class=""></a>
                        <p class="footer-description">Email me at: <a href="" class="aa"><strong class="link-email-footer">Lorem
                                    Ipsum</strong></a><br></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

{% endblock %}